<div class="stock-container">
  <div class="header">
    <h1>ðŸ“¦ Gestion du Stock</h1>
    <button mat-raised-button color="primary" (click)="openAddForm()">+ Ajouter au stock</button>
  </div>

  <div class="stock-grid">
    @if (stock().length === 0) {
      <div class="empty-state">
        <p>Aucun stock pour le moment. Commencez par en ajouter !</p>
      </div>
    }

    @for (item of stock(); track item.id) {
      <mat-card class="stock-card" [ngClass]="getExpiryStatusClass(item)">
        <mat-card-header>
          <h3>{{ getIngredientName(item.ingredientId) }}</h3>
          <span class="category-badge">{{ item.category }}</span>
        </mat-card-header>

        <mat-card-content>
          <div class="info-row">
            <span class="label">QuantitÃ©:</span>
            <span class="value">{{ item.quantity }} {{ item.unit }}</span>
          </div>
          <div class="info-row">
            <span class="label">Expiration:</span>
            <span class="value" [ngClass]="{ 'expired-text': item.isExpired }">
              {{ item.expiryDate }}
            </span>
          </div>
          <div class="info-row">
            <span class="label">Statut:</span>
            <span class="value" [ngClass]="getExpiryStatusClass(item)">
              {{ getExpiryStatus(item) }}
            </span>
          </div>
        </mat-card-content>

        <mat-card-actions>
          <button mat-button (click)="openEditForm(item)">Modifier</button>
          <button mat-button color="warn" (click)="onDeleteStock(item.id)">Supprimer</button>
        </mat-card-actions>
      </mat-card>
    }
  </div>
</div>
